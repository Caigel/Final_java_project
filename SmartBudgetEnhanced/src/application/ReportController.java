package application;

import javafx.fxml.*; import javafx.scene.*; import javafx.scene.chart.*; import javafx.scene.control.*; import java.io.File; import java.net.URL; import java.util.Map;

public class ReportController { @FXML private ToolBar toolbar; @FXML private ToggleButton toggleTheme; @FXML private PieChart pie; @FXML private BarChart<String,Number> bar; private final TransactionManager manager=new TransactionManager(); @FXML public void initialize(){ toggleTheme.setSelected(Theme.isDark()); toggleTheme.selectedProperty().addListener((o,ov,nv)->{ Theme.setDark(nv); Theme.apply(toolbar.getScene()); }); pie.getData().clear(); for(Map.Entry<String,Double> e: manager.expenseByCategory().entrySet()){ pie.getData().add(new PieChart.Data(e.getKey(), e.getValue())); } bar.getData().clear(); XYChart.Series<String,Number> s=new XYChart.Series<>(); s.setName("Totals"); s.getData().add(new XYChart.Data<>("Income", manager.totalIncome())); s.getData().add(new XYChart.Data<>("Expense", manager.totalExpense())); bar.getData().add(s); } @FXML private void goHome(){ try{ URL f=new File("resources/home.fxml").toURI().toURL(); Parent page=FXMLLoader.load(f); toolbar.getScene().setRoot(page); Theme.apply(toolbar.getScene()); }catch(Exception e){ e.printStackTrace(); } } @FXML private void gotoTransactions(){ try{ URL f=new File("resources/main.fxml").toURI().toURL(); Parent page=FXMLLoader.load(f); toolbar.getScene().setRoot(page); Theme.apply(toolbar.getScene()); }catch(Exception e){ e.printStackTrace(); } } }